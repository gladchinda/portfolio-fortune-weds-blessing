{"version":3,"sources":["app.js"],"names":["$","angular","module","constant","factory","$http","baseUrl","loadData","endpoint","scope","key","method","url","cache","then","response","data","filter","string","isString","split","map","s","toLowerCase","toUpperCase","splice","join","controller","$scope","choices","currentChoice","currentChoiceElem","setCurrentChoice","elem","current","this","isElement","element","attr","removeClass","addClass","directive","$attendingChoiceService","restrict","label","link","attrs","find","on","e","hasClass","replace","templateUrl","httpDataLoader","person","event","transclude","$modalElem","$modalContent","$loadingSpinner","first","$googMapFrame","evt","$mapEmbedUrl","relatedTarget","$googMapFrameAttributes","height","width","src","each","val","hide","show","removeAttr","jQuery"],"mappings":"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","file":"app.js","sourcesContent":["(function($, angular) {\r\n\r\n    angular.module('fb.app', [])\r\n\r\n        .constant('baseUrl', \"/services/http/rest/json/\")\r\n\r\n        .factory('httpDataLoader', ['$http', 'baseUrl', function($http, baseUrl) {\r\n\r\n            var loadData = function(endpoint, scope, key) {\r\n                $http({\r\n                    method: 'GET',\r\n                    url: baseUrl + endpoint,\r\n                    cache: true,\r\n                }).then(function(response) {\r\n                    scope[key] = response.data;\r\n                });\r\n            };\r\n\r\n            return {\r\n                loadData: loadData,\r\n            };\r\n\r\n        }])\r\n\r\n        .filter('initialCaps', function() {\r\n\r\n            return function(string) {\r\n\r\n                if (angular.isString(string)) {\r\n\r\n                    return string.split(' ').map(function(s) {\r\n\r\n                        return s = s.toLowerCase().split(''), s[0].toUpperCase() + s.splice(1).join('');\r\n\r\n                    }).join(' ');\r\n\r\n                }\r\n            };\r\n        });\r\n\r\n    angular.module('fb.attending', [])\r\n\r\n        .controller('fbAttendingController', ['$scope', function($scope) {\r\n            $scope.choices = ['yes', 'maybe', 'no'];\r\n        }])\r\n\r\n        .factory('attendingChoiceService', function() {\r\n\r\n            var currentChoice = null,\r\n                currentChoiceElem = null,\r\n\r\n                setCurrentChoice = function(elem) {\r\n\r\n                    var current = this.currentChoiceElem,\r\n                        elem = angular.isElement(elem) ? angular.element(elem) : null;\r\n\r\n                    if (elem && elem.attr('choice-label')) {\r\n\r\n                        current && current.removeClass('active');\r\n\r\n                        this.currentChoice = elem.attr('choice-label');\r\n                        this.currentChoiceElem = elem.addClass('active');\r\n                    }\r\n\r\n                };\r\n\r\n            return {\r\n                currentChoice: currentChoice,\r\n                currentChoiceElem: currentChoiceElem,\r\n                setCurrentChoice: setCurrentChoice,\r\n            };\r\n        })\r\n\r\n        .directive('fbAttendingChoice', ['attendingChoiceService', function($attendingChoiceService) {\r\n            return {\r\n                restrict: 'AE',\r\n                scope: {\r\n                    'label': \"@choiceLabel\"\r\n                },\r\n                link: function(scope, elem, attrs) {\r\n\r\n                    var currentElem = null;\r\n\r\n                    elem.find('.choice-checker, .choice-label').on('mouseover', function(e) {\r\n\r\n                        elem.addClass('has-focus');\r\n\r\n                    }).on('mouseout', function(e) {\r\n\r\n                        elem.removeClass('has-focus');\r\n\r\n                    }).on('click', function(e) {\r\n\r\n                        if (!elem.hasClass('active')) {\r\n                            $attendingChoiceService.setCurrentChoice(elem);\r\n                        }\r\n\r\n                    });\r\n\r\n                },\r\n                replace: true,\r\n                templateUrl: '/assets/js/templates/attending-choice.html',\r\n            };\r\n        }]);\r\n\r\n    angular.module('fb.couple', ['fb.app'])\r\n\r\n        .controller('fbCoupleController', ['$scope', 'httpDataLoader', function($scope, httpDataLoader) {\r\n\r\n            httpDataLoader.loadData('couple', $scope, 'couple');\r\n\r\n        }])\r\n\r\n        .directive('fbCoupleProfile', function() {\r\n            return {\r\n                restrict: 'AE',\r\n                replace: true,\r\n                scope: {\r\n                    'person': \"=coupleWho\",\r\n                },\r\n                templateUrl: '/assets/js/templates/couple-profile.html',\r\n            };\r\n        });\r\n\r\n    angular.module('fb.events', ['fb.app'])\r\n\r\n        .controller('fbEventsController', ['$scope', 'httpDataLoader', function($scope, httpDataLoader) {\r\n\r\n            httpDataLoader.loadData('events', $scope, 'events');\r\n\r\n        }])\r\n\r\n        .directive('fbEventBoard', function() {\r\n            return {\r\n                restrict: 'AE',\r\n                replace: true,\r\n                scope: {\r\n                    'event': \"=eventType\",\r\n                },\r\n                templateUrl: '/assets/js/templates/events.html',\r\n            };\r\n        })\r\n\r\n        .directive('fbEventColor', function() {\r\n            return {\r\n                restrict: 'AE',\r\n                replace: true,\r\n                scope: true,\r\n                templateUrl: '/assets/js/templates/event-color.html',\r\n                transclude: true,\r\n            };\r\n        });\r\n\r\n    angular.module('fb.locations', ['fb.app'])\r\n\r\n        .controller('fbLocationsController', ['$scope', 'httpDataLoader', function($scope, httpDataLoader) {\r\n\r\n            httpDataLoader.loadData('locations', $scope, 'locations');\r\n\r\n        }])\r\n\r\n        .directive('fbEventLocation', function() {\r\n            return {\r\n                restrict: 'AE',\r\n                replace: true,\r\n                scope: true,\r\n                templateUrl: '/assets/js/templates/locations.html',\r\n            };\r\n        });\r\n\r\n    angular.module('fb.photos', []);\r\n\r\n    angular.module('fb', ['ngSanitize', 'fb.app', 'fb.couple', 'fb.attending', 'fb.events', 'fb.locations', 'fb.photos']);\r\n\r\n    $(function app() {\r\n\r\n        (function mapViewerController() {\r\n\r\n            var $modalElem = $('#map-view-modal'),\r\n                $modalContent = $modalElem.find('.modal-content'),\r\n                $loadingSpinner = $modalElem.find('.loading-spinner').first(),\r\n                $googMapFrame = $modalContent.find('iframe.goog-map-embed-frame').first();\r\n\r\n            $modalElem.on('shown.bs.modal', function(evt) {\r\n\r\n                var $mapEmbedUrl = $(evt.relatedTarget).data('place'),\r\n\r\n                    $googMapFrameAttributes = {\r\n                        height: $modalContent.height() - 5,\r\n                        width: $modalContent.width(),\r\n                        src: $mapEmbedUrl,\r\n                    };\r\n\r\n                $.each($googMapFrameAttributes, function(attr, val) {\r\n                    $googMapFrame.attr(attr, val);\r\n                });\r\n\r\n                $googMapFrame.on('load', function(evt) {\r\n                    $loadingSpinner.hide();\r\n                });\r\n\r\n            })\r\n\r\n            .on('show.bs.modal', function(evt) {\r\n                $loadingSpinner.show();\r\n            })\r\n\r\n            .on('hidden.bs.modal', function(evt) {\r\n                $googMapFrame.removeAttr('src');\r\n                $loadingSpinner.hide();\r\n            });;\r\n\r\n        })();\r\n\r\n    });\r\n\r\n})(jQuery, angular);\r\n"]}