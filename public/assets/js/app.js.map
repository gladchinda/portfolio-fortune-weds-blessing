{"version":3,"sources":["app.js"],"names":["$","angular","module","constant","factory","$http","baseUrl","loadData","endpoint","scope","key","method","url","cache","then","response","data","filter","string","isString","split","map","s","toLowerCase","toUpperCase","splice","join","controller","$scope","choices","currentChoice","currentChoiceElem","setCurrentChoice","elem","current","this","isElement","element","attr","removeClass","addClass","directive","$attendingChoiceService","restrict","label","link","attrs","find","on","e","hasClass","replace","templateUrl","httpDataLoader","person","event","transclude","$modalElem","$modalContent","$loadingSpinner","first","$googMapFrame","evt","googMapFrameResolution","$googMapFrameAttributes","height","width","each","val","$mapEmbedUrl","relatedTarget","prop","hide","window","modal","show","removeAttr","ajax","done","result","$linksContainer","$baseUrl","$photoGrid","length","$randomPhotos","$random","Math","floor","random","photos","indexOf","push","n","index","photo","append","appendTo","photoGridResolution","$fullWidth","$fullHeight","css","perfectScrollbar","maxScrollbarLength","jQuery"],"mappings":"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","file":"app.js","sourcesContent":["(function($, angular) {\r\n\r\n    angular.module('fb.app', [])\r\n\r\n        .constant('baseUrl', \"/services/http/rest/json/\")\r\n\r\n        .factory('httpDataLoader', ['$http', 'baseUrl', function($http, baseUrl) {\r\n\r\n            var loadData = function(endpoint, scope, key) {\r\n                $http({\r\n                    method: 'GET',\r\n                    url: baseUrl + endpoint,\r\n                    cache: true,\r\n                }).then(function(response) {\r\n                    scope[key] = response.data;\r\n                });\r\n            };\r\n\r\n            return {\r\n                loadData: loadData,\r\n            };\r\n\r\n        }])\r\n\r\n        .filter('initialCaps', function() {\r\n\r\n            return function(string) {\r\n\r\n                if (angular.isString(string)) {\r\n\r\n                    return string.split(' ').map(function(s) {\r\n\r\n                        return s = s.toLowerCase().split(''), s[0].toUpperCase() + s.splice(1).join('');\r\n\r\n                    }).join(' ');\r\n\r\n                }\r\n            };\r\n        });\r\n\r\n    angular.module('fb.attending', [])\r\n\r\n        .controller('fbAttendingController', ['$scope', function($scope) {\r\n            $scope.choices = ['yes', 'maybe', 'no'];\r\n        }])\r\n\r\n        .factory('attendingChoiceService', function() {\r\n\r\n            var currentChoice = null,\r\n                currentChoiceElem = null,\r\n\r\n                setCurrentChoice = function(elem) {\r\n\r\n                    var current = this.currentChoiceElem,\r\n                        elem = angular.isElement(elem) ? angular.element(elem) : null;\r\n\r\n                    if (elem && elem.attr('choice-label')) {\r\n\r\n                        current && current.removeClass('active');\r\n\r\n                        this.currentChoice = elem.attr('choice-label');\r\n                        this.currentChoiceElem = elem.addClass('active');\r\n                    }\r\n\r\n                };\r\n\r\n            return {\r\n                currentChoice: currentChoice,\r\n                currentChoiceElem: currentChoiceElem,\r\n                setCurrentChoice: setCurrentChoice,\r\n            };\r\n        })\r\n\r\n        .directive('fbAttendingChoice', ['attendingChoiceService', function($attendingChoiceService) {\r\n            return {\r\n                restrict: 'AE',\r\n                scope: {\r\n                    'label': \"@choiceLabel\"\r\n                },\r\n                link: function(scope, elem, attrs) {\r\n\r\n                    var currentElem = null;\r\n\r\n                    elem.find('.choice-checker, .choice-label').on('mouseover', function(e) {\r\n\r\n                        elem.addClass('has-focus');\r\n\r\n                    }).on('mouseout', function(e) {\r\n\r\n                        elem.removeClass('has-focus');\r\n\r\n                    }).on('click', function(e) {\r\n\r\n                        if (!elem.hasClass('active')) {\r\n                            $attendingChoiceService.setCurrentChoice(elem);\r\n                        }\r\n\r\n                    });\r\n\r\n                },\r\n                replace: true,\r\n                templateUrl: '/assets/js/templates/attending-choice.html',\r\n            };\r\n        }]);\r\n\r\n    angular.module('fb.couple', ['fb.app'])\r\n\r\n        .controller('fbCoupleController', ['$scope', 'httpDataLoader', function($scope, httpDataLoader) {\r\n\r\n            httpDataLoader.loadData('couple', $scope, 'couple');\r\n\r\n        }])\r\n\r\n        .directive('fbCoupleProfile', function() {\r\n            return {\r\n                restrict: 'AE',\r\n                replace: true,\r\n                scope: {\r\n                    'person': \"=coupleWho\",\r\n                },\r\n                templateUrl: '/assets/js/templates/couple-profile.html',\r\n            };\r\n        });\r\n\r\n    angular.module('fb.events', ['fb.app'])\r\n\r\n        .controller('fbEventsController', ['$scope', 'httpDataLoader', function($scope, httpDataLoader) {\r\n\r\n            httpDataLoader.loadData('events', $scope, 'events');\r\n\r\n        }])\r\n\r\n        .directive('fbEventBoard', function() {\r\n            return {\r\n                restrict: 'AE',\r\n                replace: true,\r\n                scope: {\r\n                    'event': \"=eventType\",\r\n                },\r\n                templateUrl: '/assets/js/templates/events.html',\r\n            };\r\n        })\r\n\r\n        .directive('fbEventColor', function() {\r\n            return {\r\n                restrict: 'AE',\r\n                replace: true,\r\n                scope: true,\r\n                templateUrl: '/assets/js/templates/event-color.html',\r\n                transclude: true,\r\n            };\r\n        });\r\n\r\n    angular.module('fb.locations', ['fb.app'])\r\n\r\n        .controller('fbLocationsController', ['$scope', 'httpDataLoader', function($scope, httpDataLoader) {\r\n\r\n            httpDataLoader.loadData('locations', $scope, 'locations');\r\n\r\n        }])\r\n\r\n        .directive('fbEventLocation', function() {\r\n            return {\r\n                restrict: 'AE',\r\n                replace: true,\r\n                scope: true,\r\n                templateUrl: '/assets/js/templates/locations.html',\r\n            };\r\n        });\r\n\r\n    angular.module('fb.credits', [])\r\n\r\n        .controller('fbCreditsController', ['$scope', 'httpDataLoader', function($scope, httpDataLoader) {\r\n\r\n            httpDataLoader.loadData('credits', $scope, 'credits');\r\n\r\n        }]);\r\n\r\n    angular.module('fb', ['ngSanitize', 'fb.app', 'fb.couple', 'fb.attending', 'fb.events', 'fb.locations', 'fb.credits']);\r\n\r\n    $(function app() {\r\n\r\n        (function mapViewerController() {\r\n\r\n            var $modalElem = $('#map-view-modal'),\r\n                $modalContent = $modalElem.find('.modal-content'),\r\n                $loadingSpinner = $modalElem.find('.loading-spinner').first(),\r\n                $googMapFrame = $modalContent.find('iframe.goog-map-embed-frame').first();\r\n\r\n            $modalElem.on('shown.bs.modal', function(evt) {\r\n\r\n                var $mapEmbedUrl = $(evt.relatedTarget).data('place');\r\n\r\n                function googMapFrameResolution() {\r\n\r\n                    var $googMapFrameAttributes = {\r\n                        height: $modalContent.height() - 5,\r\n                        width: $modalContent.width(),\r\n                    };\r\n\r\n                    $.each($googMapFrameAttributes, function(attr, val) {\r\n                        $googMapFrame.attr(attr, val);\r\n                    });\r\n\r\n                }\r\n\r\n                googMapFrameResolution();\r\n\r\n                $googMapFrame.prop('src', $mapEmbedUrl).on('load', function(evt) {\r\n                    $loadingSpinner.hide();\r\n                });\r\n\r\n                $(window).on('resize', function(evt) {\r\n                    googMapFrameResolution();\r\n                    $modalElem.modal('handleUpdate');\r\n                });\r\n\r\n            })\r\n\r\n            .on('show.bs.modal', function(evt) {\r\n                $loadingSpinner.show();\r\n            })\r\n\r\n            .on('hidden.bs.modal', function(evt) {\r\n                $googMapFrame.removeAttr('src');\r\n                $loadingSpinner.hide();\r\n            });\r\n\r\n        })();\r\n\r\n        (function loadGalleryPhotos() {\r\n\r\n            $.ajax({\r\n                url: '/services/http/rest/json/photos',\r\n            }).done(function (result) {\r\n\r\n                var $linksContainer = $('#blueimp-photo-links'),\r\n                    $baseUrl = 'https://s3.eu-west-2.amazonaws.com/fortunewedsblessing.com/images/uploads/',\r\n                    $photoGrid = $('#photos-section .photo-grid');\r\n\r\n                (function getRandomShowcasePhotos(length) {\r\n\r\n                    var length = length || 7,\r\n                        $randomPhotos = [];\r\n\r\n                    while ($randomPhotos.length < length) {\r\n                        $random = Math.floor( Math.random() * result.photos.length );\r\n                        ( $randomPhotos.indexOf($random) === -1 ) && $randomPhotos.push($random);\r\n                    }\r\n\r\n                    $randomPhotos = $randomPhotos.map(function(n) {\r\n                        return $baseUrl + 'thumbnails/' + result.photos[n];\r\n                    });\r\n\r\n                    $.each($randomPhotos, function(index, photo) {\r\n                        $photoGrid.append($('<div class=\"photo-grid-img\"/>').append($('<img class=\"img-responsive\">').prop('src', photo).attr('alt', 'Gallery sample photo')));\r\n                    });\r\n\r\n                })();\r\n\r\n                $.each(result.photos, function (index, photo) {\r\n\r\n                    $('<a/>')\r\n                        .append($('<img>').prop('src', $baseUrl + 'thumbnails/' + photo))\r\n                        .prop('href', $baseUrl + photo)\r\n                        .attr('data-gallery', '')\r\n                        .appendTo($linksContainer);\r\n\r\n                });\r\n\r\n            });\r\n\r\n        })();\r\n\r\n        (function photoGalleryController() {\r\n\r\n            var $modalElem = $('#photo-gallery-modal'),\r\n                $modalContent = $modalElem.find('.modal-content'),\r\n                $linksContainer = $('#blueimp-photo-links'),\r\n                $galleryContainer = $('#blueimp-gallery');\r\n\r\n            $modalElem.on('shown.bs.modal', function(evt) {\r\n\r\n                function photoGridResolution() {\r\n\r\n                    var $fullWidth = $modalContent.width(),\r\n                        $fullHeight = $modalContent.height();\r\n\r\n                    $linksContainer.css({'width': $fullWidth, 'height': $fullHeight * 0.5}).perfectScrollbar({maxScrollbarLength: $fullHeight * 0.2});\r\n\r\n                }\r\n\r\n                $(window).on('resize', function(evt) {\r\n                    photoGridResolution();\r\n                });\r\n\r\n                photoGridResolution();\r\n\r\n            });\r\n\r\n        })();\r\n\r\n    });\r\n\r\n})(jQuery, angular);\r\n"]}