{"version":3,"sources":["app.js"],"names":["$","angular","$modalElem","$modalContent","find","$loadingSpinner","first","$googMapFrame","on","evt","googMapFrameResolution","$googMapFrameAttributes","height","width","each","attr","val","$mapEmbedUrl","relatedTarget","data","prop","hide","window","modal","show","removeAttr","ajax","url","done","result","$linksContainer","$baseUrl","$photoGrid","length","$randomPhotos","$random","Math","floor","random","photos","indexOf","push","map","n","index","photo","append","appendTo","photoGridResolution","$fullWidth","$fullHeight","css","perfectScrollbar","maxScrollbarLength","module","constant","factory","$http","baseUrl","loadData","endpoint","scope","key","method","cache","then","response","filter","string","isString","split","s","toLowerCase","toUpperCase","splice","join","controller","$scope","choices","currentChoice","currentChoiceElem","setCurrentChoice","elem","current","this","isElement","element","removeClass","addClass","directive","$attendingChoiceService","restrict","label","link","attrs","e","hasClass","replace","templateUrl","httpDataLoader","person","event","transclude","$window","typed","strings","supporters","loop","typeSpeed","backDelay","jQuery"],"mappings":"CAAA,SAAUA,EAAGC,GAETD,EAAE,YAEE,WAEI,GAAIE,GAAaF,EAAE,mBACfG,EAAgBD,EAAWE,KAAK,kBAChCC,EAAkBH,EAAWE,KAAK,oBAAoBE,QACtDC,EAAgBJ,EAAcC,KAAK,+BAA+BE,OAEtEJ,GAAWM,GAAG,iBAAkB,SAASC,GAIrC,QAASC,KAEL,GAAIC,IACAC,OAAQT,EAAcS,SAAW,EACjCC,MAAOV,EAAcU,QAGzBb,GAAEc,KAAKH,EAAyB,SAASI,EAAMC,GAC3CT,EAAcQ,KAAKA,EAAMC,KAVjC,GAAIC,GAAejB,EAAES,EAAIS,eAAeC,KAAK,QAe7CT,KAEAH,EAAca,KAAK,MAAOH,GAAcT,GAAG,OAAQ,SAASC,GACxDJ,EAAgBgB,SAGpBrB,EAAEsB,QAAQd,GAAG,SAAU,SAASC,GAC5BC,IACAR,EAAWqB,MAAM,oBAKxBf,GAAG,gBAAiB,SAASC,GAC1BJ,EAAgBmB,SAGnBhB,GAAG,kBAAmB,SAASC,GAC5BF,EAAckB,WAAW,OACzBpB,EAAgBgB,YAKxB,WAEIrB,EAAE0B,MACEC,IAAK,oCACNC,KAAK,SAAUC,GAEd,GAAIC,GAAkB9B,EAAE,wBACpB+B,EAAW,6EACXC,EAAahC,EAAE,gCAEnB,SAAkCiC,GAK9B,IAHA,GAAIA,GAASA,GAAU,EACnBC,KAEGA,EAAcD,OAASA,GAC1BE,QAAUC,KAAKC,MAAOD,KAAKE,SAAWT,EAAOU,OAAON,SACd,IAApCC,EAAcM,QAAQL,UAAqBD,EAAcO,KAAKN,QAGpED,GAAgBA,EAAcQ,IAAI,SAASC,GACvC,MAAOZ,GAAW,cAAgBF,EAAOU,OAAOI,KAGpD3C,EAAEc,KAAKoB,EAAe,SAASU,EAAOC,GAClCb,EAAWc,OAAO9C,EAAE,iCAAiC8C,OAAO9C,EAAE,gCAAgCoB,KAAK,MAAOyB,GAAO9B,KAAK,MAAO,+BAKrIf,EAAEc,KAAKe,EAAOU,OAAQ,SAAUK,EAAOC,GAEnC7C,EAAE,QACG8C,OAAO9C,EAAE,SAASoB,KAAK,MAAOW,EAAW,cAAgBc,IACzDzB,KAAK,OAAQW,EAAWc,GACxB9B,KAAK,eAAgB,IACrBgC,SAASjB,UAQ1B,WAEI,GAAI5B,GAAaF,EAAE,wBACfG,EAAgBD,EAAWE,KAAK,kBAChC0B,EAAkB9B,EAAE,uBACAA,GAAE,mBAE1BE,GAAWM,GAAG,iBAAkB,SAASC,GAErC,QAASuC,KAEL,GAAIC,GAAa9C,EAAcU,QAC3BqC,EAAc/C,EAAcS,QAEhCkB,GAAgBqB,KAAKtC,MAASoC,EAAYrC,OAAwB,GAAdsC,IAAoBE,kBAAkBC,mBAAkC,GAAdH,IAIlHlD,EAAEsB,QAAQd,GAAG,SAAU,SAASC,GAC5BuC,MAGJA,WAQZ,WAEI/C,EAAQqD,OAAO,aAEVC,SAAS,UAAW,6BAEpBC,QAAQ,kBAAmB,QAAS,UAAW,SAASC,EAAOC,GAY5D,OACIC,SAXW,SAASC,EAAUC,EAAOC,GACrC,MAAOL,IACHM,OAAQ,MACRpC,IAAK+B,EAAUE,EACfI,OAAO,IACRC,KAAK,SAASC,GACbL,EAAMC,GAAOI,EAAS/C,YAUjCgD,OAAO,cAAe,WAEnB,MAAO,UAASC,GAEZ,GAAInE,EAAQoE,SAASD,GAEjB,MAAOA,GAAOE,MAAM,KAAK5B,IAAI,SAAS6B,GAElC,MAAOA,GAAIA,EAAEC,cAAcF,MAAM,IAAKC,EAAE,GAAGE,cAAgBF,EAAEG,OAAO,GAAGC,KAAK,MAE7EA,KAAK,QAMxB1E,EAAQqD,OAAO,mBAEVsB,WAAW,yBAA0B,SAAU,SAASC,GACrDA,EAAOC,SAAW,MAAO,QAAS,SAGrCtB,QAAQ,yBAA0B,WAoB/B,OACIuB,cAnBgB,KAoBhBC,kBAnBoB,KAoBpBC,iBAlBmB,SAASC,GAExB,GAAIC,GAAUC,KAAKJ,kBACfE,EAAOjF,EAAQoF,UAAUH,GAAQjF,EAAQqF,QAAQJ,GAAQ,IAEzDA,IAAQA,EAAKnE,KAAK,kBAElBoE,GAAWA,EAAQI,YAAY,UAE/BH,KAAKL,cAAgBG,EAAKnE,KAAK,gBAC/BqE,KAAKJ,kBAAoBE,EAAKM,SAAS,eAYtDC,UAAU,qBAAsB,yBAA0B,SAASC,GAChE,OACIC,SAAU,KACV9B,OACI+B,MAAS,gBAEbC,KAAM,SAAShC,EAAOqB,EAAMY,GAIxBZ,EAAK9E,KAAK,kCAAkCI,GAAG,YAAa,SAASuF,GAEjEb,EAAKM,SAAS,eAEfhF,GAAG,WAAY,SAASuF,GAEvBb,EAAKK,YAAY,eAElB/E,GAAG,QAAS,SAASuF,GAEfb,EAAKc,SAAS,WACfN,EAAwBT,iBAAiBC,MAMrDe,SAAS,EACTC,YAAa,iDAIzBjG,EAAQqD,OAAO,aAAc,WAExBsB,WAAW,sBAAuB,SAAU,iBAAkB,SAASC,EAAQsB,GAE5EA,EAAexC,SAAS,SAAUkB,EAAQ,aAI7CY,UAAU,kBAAmB,WAC1B,OACIE,SAAU,KACVM,SAAS,EACTpC,OACIuC,OAAU,cAEdF,YAAa,8CAIzBjG,EAAQqD,OAAO,aAAc,WAExBsB,WAAW,sBAAuB,SAAU,iBAAkB,SAASC,EAAQsB,GAE5EA,EAAexC,SAAS,SAAUkB,EAAQ,aAI7CY,UAAU,eAAgB,WACvB,OACIE,SAAU,KACVM,SAAS,EACTpC,OACIwC,MAAS,cAEbH,YAAa,sCAIpBT,UAAU,eAAgB,WACvB,OACIE,SAAU,KACVM,SAAS,EACTpC,OAAO,EACPqC,YAAa,wCACbI,YAAY,KAIxBrG,EAAQqD,OAAO,gBAAiB,WAE3BsB,WAAW,yBAA0B,SAAU,iBAAkB,SAASC,EAAQsB,GAE/EA,EAAexC,SAAS,YAAakB,EAAQ,gBAIhDY,UAAU,kBAAmB,WAC1B,OACIE,SAAU,KACVM,SAAS,EACTpC,OAAO,EACPqC,YAAa,yCAIzBjG,EAAQqD,OAAO,iBAEVsB,WAAW,uBAAwB,SAAU,iBAAkB,UAAW,SAASC,EAAQsB,EAAgBI,GAExGJ,EAAexC,SAAS,UAAWkB,EAAQ,WAAWZ,KAAK,WAEvDsC,EAAgB,OAAE,qCAAqCjG,QAAQkG,OAC3DC,QAAS5B,EAAgB,QAAE6B,WAC3BC,MAAM,EACNC,UAAW,GACdC,UAAW,YAOxB5G,EAAQqD,OAAO,MAAO,aAAc,SAAU,YAAa,eAAgB,YAAa,eAAgB,mBAI7GwD,OAAQ7G","file":"app.js","sourcesContent":["(function($, angular) {\r\n\r\n    $(function app() {\r\n\r\n        (function mapViewerController() {\r\n\r\n            var $modalElem = $('#map-view-modal'),\r\n                $modalContent = $modalElem.find('.modal-content'),\r\n                $loadingSpinner = $modalElem.find('.loading-spinner').first(),\r\n                $googMapFrame = $modalContent.find('iframe.goog-map-embed-frame').first();\r\n\r\n            $modalElem.on('shown.bs.modal', function(evt) {\r\n\r\n                var $mapEmbedUrl = $(evt.relatedTarget).data('place');\r\n\r\n                function googMapFrameResolution() {\r\n\r\n                    var $googMapFrameAttributes = {\r\n                        height: $modalContent.height() - 5,\r\n                        width: $modalContent.width(),\r\n                    };\r\n\r\n                    $.each($googMapFrameAttributes, function(attr, val) {\r\n                        $googMapFrame.attr(attr, val);\r\n                    });\r\n\r\n                }\r\n\r\n                googMapFrameResolution();\r\n\r\n                $googMapFrame.prop('src', $mapEmbedUrl).on('load', function(evt) {\r\n                    $loadingSpinner.hide();\r\n                });\r\n\r\n                $(window).on('resize', function(evt) {\r\n                    googMapFrameResolution();\r\n                    $modalElem.modal('handleUpdate');\r\n                });\r\n\r\n            })\r\n\r\n            .on('show.bs.modal', function(evt) {\r\n                $loadingSpinner.show();\r\n            })\r\n\r\n            .on('hidden.bs.modal', function(evt) {\r\n                $googMapFrame.removeAttr('src');\r\n                $loadingSpinner.hide();\r\n            });\r\n\r\n        })();\r\n\r\n        (function loadGalleryPhotos() {\r\n\r\n            $.ajax({\r\n                url: '/services/http/rest/json/photos',\r\n            }).done(function (result) {\r\n\r\n                var $linksContainer = $('#blueimp-photo-links'),\r\n                    $baseUrl = 'https://s3.eu-west-2.amazonaws.com/fortunewedsblessing.com/images/uploads/',\r\n                    $photoGrid = $('#photos-section .photo-grid');\r\n\r\n                (function getRandomShowcasePhotos(length) {\r\n\r\n                    var length = length || 7,\r\n                        $randomPhotos = [];\r\n\r\n                    while ($randomPhotos.length < length) {\r\n                        $random = Math.floor( Math.random() * result.photos.length );\r\n                        ( $randomPhotos.indexOf($random) === -1 ) && $randomPhotos.push($random);\r\n                    }\r\n\r\n                    $randomPhotos = $randomPhotos.map(function(n) {\r\n                        return $baseUrl + 'thumbnails/' + result.photos[n];\r\n                    });\r\n\r\n                    $.each($randomPhotos, function(index, photo) {\r\n                        $photoGrid.append($('<div class=\"photo-grid-img\"/>').append($('<img class=\"img-responsive\">').prop('src', photo).attr('alt', 'Gallery sample photo')));\r\n                    });\r\n\r\n                })();\r\n\r\n                $.each(result.photos, function (index, photo) {\r\n\r\n                    $('<a/>')\r\n                        .append($('<img>').prop('src', $baseUrl + 'thumbnails/' + photo))\r\n                        .prop('href', $baseUrl + photo)\r\n                        .attr('data-gallery', '')\r\n                        .appendTo($linksContainer);\r\n\r\n                });\r\n\r\n            });\r\n\r\n        })();\r\n\r\n        (function photoGalleryController() {\r\n\r\n            var $modalElem = $('#photo-gallery-modal'),\r\n                $modalContent = $modalElem.find('.modal-content'),\r\n                $linksContainer = $('#blueimp-photo-links'),\r\n                $galleryContainer = $('#blueimp-gallery');\r\n\r\n            $modalElem.on('shown.bs.modal', function(evt) {\r\n\r\n                function photoGridResolution() {\r\n\r\n                    var $fullWidth = $modalContent.width(),\r\n                        $fullHeight = $modalContent.height();\r\n\r\n                    $linksContainer.css({'width': $fullWidth, 'height': $fullHeight * 0.5}).perfectScrollbar({maxScrollbarLength: $fullHeight * 0.2});\r\n\r\n                }\r\n\r\n                $(window).on('resize', function(evt) {\r\n                    photoGridResolution();\r\n                });\r\n\r\n                photoGridResolution();\r\n\r\n            });\r\n\r\n        })();\r\n\r\n    });\r\n\r\n    (function runAngularApplication() {\r\n\r\n        angular.module('fb.app', [])\r\n\r\n            .constant('baseUrl', \"/services/http/rest/json/\")\r\n\r\n            .factory('httpDataLoader', ['$http', 'baseUrl', function($http, baseUrl) {\r\n\r\n                var loadData = function(endpoint, scope, key) {\r\n                    return $http({\r\n                        method: 'GET',\r\n                        url: baseUrl + endpoint,\r\n                        cache: true,\r\n                    }).then(function(response) {\r\n                        scope[key] = response.data;\r\n                    });\r\n                };\r\n\r\n                return {\r\n                    loadData: loadData,\r\n                };\r\n\r\n            }])\r\n\r\n            .filter('initialCaps', function() {\r\n\r\n                return function(string) {\r\n\r\n                    if (angular.isString(string)) {\r\n\r\n                        return string.split(' ').map(function(s) {\r\n\r\n                            return s = s.toLowerCase().split(''), s[0].toUpperCase() + s.splice(1).join('');\r\n\r\n                        }).join(' ');\r\n\r\n                    }\r\n                };\r\n            });\r\n\r\n        angular.module('fb.attending', [])\r\n\r\n            .controller('fbAttendingController', ['$scope', function($scope) {\r\n                $scope.choices = ['yes', 'maybe', 'no'];\r\n            }])\r\n\r\n            .factory('attendingChoiceService', function() {\r\n\r\n                var currentChoice = null,\r\n                    currentChoiceElem = null,\r\n\r\n                    setCurrentChoice = function(elem) {\r\n\r\n                        var current = this.currentChoiceElem,\r\n                            elem = angular.isElement(elem) ? angular.element(elem) : null;\r\n\r\n                        if (elem && elem.attr('choice-label')) {\r\n\r\n                            current && current.removeClass('active');\r\n\r\n                            this.currentChoice = elem.attr('choice-label');\r\n                            this.currentChoiceElem = elem.addClass('active');\r\n                        }\r\n\r\n                    };\r\n\r\n                return {\r\n                    currentChoice: currentChoice,\r\n                    currentChoiceElem: currentChoiceElem,\r\n                    setCurrentChoice: setCurrentChoice,\r\n                };\r\n            })\r\n\r\n            .directive('fbAttendingChoice', ['attendingChoiceService', function($attendingChoiceService) {\r\n                return {\r\n                    restrict: 'AE',\r\n                    scope: {\r\n                        'label': \"@choiceLabel\"\r\n                    },\r\n                    link: function(scope, elem, attrs) {\r\n\r\n                        var currentElem = null;\r\n\r\n                        elem.find('.choice-checker, .choice-label').on('mouseover', function(e) {\r\n\r\n                            elem.addClass('has-focus');\r\n\r\n                        }).on('mouseout', function(e) {\r\n\r\n                            elem.removeClass('has-focus');\r\n\r\n                        }).on('click', function(e) {\r\n\r\n                            if (!elem.hasClass('active')) {\r\n                                $attendingChoiceService.setCurrentChoice(elem);\r\n                            }\r\n\r\n                        });\r\n\r\n                    },\r\n                    replace: true,\r\n                    templateUrl: '/assets/js/templates/attending-choice.html',\r\n                };\r\n            }]);\r\n\r\n        angular.module('fb.couple', ['fb.app'])\r\n\r\n            .controller('fbCoupleController', ['$scope', 'httpDataLoader', function($scope, httpDataLoader) {\r\n\r\n                httpDataLoader.loadData('couple', $scope, 'couple');\r\n\r\n            }])\r\n\r\n            .directive('fbCoupleProfile', function() {\r\n                return {\r\n                    restrict: 'AE',\r\n                    replace: true,\r\n                    scope: {\r\n                        'person': \"=coupleWho\",\r\n                    },\r\n                    templateUrl: '/assets/js/templates/couple-profile.html',\r\n                };\r\n            });\r\n\r\n        angular.module('fb.events', ['fb.app'])\r\n\r\n            .controller('fbEventsController', ['$scope', 'httpDataLoader', function($scope, httpDataLoader) {\r\n\r\n                httpDataLoader.loadData('events', $scope, 'events');\r\n\r\n            }])\r\n\r\n            .directive('fbEventBoard', function() {\r\n                return {\r\n                    restrict: 'AE',\r\n                    replace: true,\r\n                    scope: {\r\n                        'event': \"=eventType\",\r\n                    },\r\n                    templateUrl: '/assets/js/templates/events.html',\r\n                };\r\n            })\r\n\r\n            .directive('fbEventColor', function() {\r\n                return {\r\n                    restrict: 'AE',\r\n                    replace: true,\r\n                    scope: true,\r\n                    templateUrl: '/assets/js/templates/event-color.html',\r\n                    transclude: true,\r\n                };\r\n            });\r\n\r\n        angular.module('fb.locations', ['fb.app'])\r\n\r\n            .controller('fbLocationsController', ['$scope', 'httpDataLoader', function($scope, httpDataLoader) {\r\n\r\n                httpDataLoader.loadData('locations', $scope, 'locations');\r\n\r\n            }])\r\n\r\n            .directive('fbEventLocation', function() {\r\n                return {\r\n                    restrict: 'AE',\r\n                    replace: true,\r\n                    scope: true,\r\n                    templateUrl: '/assets/js/templates/locations.html',\r\n                };\r\n            });\r\n\r\n        angular.module('fb.credits', [])\r\n\r\n            .controller('fbCreditsController', ['$scope', 'httpDataLoader', '$window', function($scope, httpDataLoader, $window) {\r\n\r\n                httpDataLoader.loadData('credits', $scope, 'credits').then(function() {\r\n\r\n                    $window['jQuery']('#credits-and-supports .typewriter').first().typed({\r\n                        strings: $scope['credits'].supporters,\r\n                        loop: true,\r\n                        typeSpeed: 20,\r\n    \t                backDelay: 2500,\r\n                    });\r\n\r\n                });\r\n\r\n            }]);\r\n\r\n        angular.module('fb', ['ngSanitize', 'fb.app', 'fb.couple', 'fb.attending', 'fb.events', 'fb.locations', 'fb.credits']);\r\n\r\n    })();\r\n\r\n})(jQuery, angular);\r\n"]}